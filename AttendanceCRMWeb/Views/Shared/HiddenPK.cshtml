

<style>
    /*body, html {
        margin: 0;
        padding: 0;
        height: 100%;
    }

    body {
        background: #222 url('data:image/jpg;base64,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');
    }*/

    .calc-main { /* center / center */
        /*position: absolute;*/
        top: 50%;
        left: 50%;
        /*margin-top: -170px;
            margin-left: -250px;*/
    }

    .calc-small {
        margin-left: -130px;
    }





    /* ------- calculator housing ------- */

    .calc-main {
        display: block;
        width: 500px; /* only needed in Chrome extension */
        padding: 16px 10px 18px;
        font: bold 15px/28px Arial, Helvetica, sans-serif;
        border-radius: 12px;
        box-shadow: inset 0px -38px 5px rgba( 0, 0, 0, 0.8), inset 0px 6px 4px rgba(255, 255, 255, 0.25), inset 0px 2px 1px rgba(255, 255, 255, 0.25), inset 3px 0px 3px rgba(255, 255, 255, 0.25), inset -4px 0px 4px rgba( 0, 0, 0, 0.75);
        background: #141414; /* Old browsers */
        background: -moz-linear-gradient(top, #141414 45%, #282828 80%); /* FF3.6+ */
        background: -webkit-gradient(linear, left top, left bottom, color-stop(45%,#141414), color-stop(80%,#282828)); /* Chrome,Safari4+ */
        background: -webkit-linear-gradient(top, #141414 45%,#282828 80%); /* Chrome10+,Safari5.1+ */
        background: -o-linear-gradient(top, #141414 45%,#282828 80%); /* Opera 11.10+ */
        background: -ms-linear-gradient(top, #141414 45%,#282828 80%); /* IE10+ */
        background: linear-gradient(to bottom, #141414 45%,#282828 80%); /* W3C */
        filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#141414', endColorstr='#282828',GradientType=0 ); /* IE6-9 */
    }

        .calc-main:after {
            content: "";
            display: block;
            clear: both;
        }

    .calc-small {
        /* width: 240px; */ /* only needed in Chrome extension */
    }

    /* --------- display --------- */

    .calc-display {
        position: relative;
        height: 60px;
        margin: 0 5px 6px 5px;
        padding: 0 8px;
        border-radius: 5px;
        box-shadow: inset 0 30px 1px rgba(255, 255, 255, 0.25), inset 0 -1px 2px rgba(255, 255, 255, 0.5), inset 0 2px 3px rgba( 0, 0, 0, 0.40);
        font-size: 45px;
        line-height: 61px;
        text-align: right;
        white-space: nowrap;
        color: #333;
        cursor: default;
        text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.01); /* for nicer/smoother rendering */
        background: #edefe0; /* Old browsers */
        background: -moz-linear-gradient(top, #edefe0 45%, #babea2 80%); /* FF3.6+ */
        background: -webkit-gradient(linear, left top, left bottom, color-stop(45%,#edefe0), color-stop(80%,#babea2)); /* Chrome,Safari4+ */
        background: -webkit-linear-gradient(top, #edefe0 45%,#babea2 80%); /* Chrome10+,Safari5.1+ */
        background: -o-linear-gradient(top, #edefe0 45%,#babea2 80%); /* Opera 11.10+ */
        background: -ms-linear-gradient(top, #edefe0 45%,#babea2 80%); /* IE10+ */
        background: linear-gradient(to bottom, #edefe0 45%,#babea2 80%); /* W3C */
        filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#edefe0', endColorstr='#babea2',GradientType=0 ); /* IE6-9 */
    }

    .calc-rad {
        position: absolute;
        bottom: 2px;
        font-size: 14px;
        line-height: 14px;
        left: 11px;
    }

    .calc-small .calc-rad {
        display: none;
    }

    .calc-hold {
        position: absolute;
        right: 5px;
        bottom: 1px;
        font-size: 8px;
        line-height: 13px;
        color: #666;
        height: 12px;
    }

    /* ----- display helper buttons ----- */

    .calc-buttons {
        position: absolute;
        top: 2px;
        left: 2px;
        opacity: .35;
        height: 14px;
        width: 14px;
        transition: opacity 0.15s ease-in;
    }

        .calc-buttons:hover {
            opacity: 0.75;
            height: 100%;
            width: 17px;
        }

        .calc-buttons div {
            position: absolute;
            top: 1px;
            height: 11px;
            width: 11px;
            font-size: 8px;
            text-align: center;
            text-decoration: none;
            line-height: 12px;
            text-indent: 1px;
            color: #333;
            cursor: default;
            border-radius: 50%;
            border: 1px solid #444;
        }

        .calc-buttons .calc-smaller {
            opacity: 0;
        }

        .calc-buttons .calc-ln {
            font-size: 17px;
            line-height: 2px;
            overflow: hidden;
            opacity: 0;
        }

        .calc-buttons:hover div {
            transition: opacity 0.15s ease-in, top 0.25s ease-out;
        }

        .calc-buttons:hover .calc-smaller {
            top: 15px;
            opacity: 0.75;
        }

        .calc-buttons:hover .calc-ln {
            top: 29px;
            opacity: 0.75;
        }

        .calc-buttons .calc-info:hover, .calc-buttons .calc-smaller:hover, .calc-buttons .calc-ln:hover {
            opacity: 1;
        }

    /* -------- key board -------- */

    .calc-left, .calc-right {
        position: relative;
        float: left;
        width: 240px;
    }

    .calc-small .calc-left {
        display: none;
    }

    .calc-f17 {
        font-size: 17px;
    }

    .calc-f18 {
        font-size: 18px;
    }

    .calc-f19 {
        font-size: 19px;
    }

    .calc-f21 {
        font-size: 21px;
    }

    .calc-main textarea {
        position: absolute;
        width: 1px;
        height: 1px;
        left: 4px;
        top: 4px;
        border: 0;
        background-color: transparent;
    }

    /* -------- key board keys -------- */

    .calc-left > div, .calc-right > div {
        margin: 5px 4px;
        position: relative;
        width: 50px;
        height: 28px;
        background-color: #4c5356;
        border: 1px solid black;
        box-shadow: 0 1px rgba(255, 255, 255, 0.1);
        border-radius: 6px;
        overflow: hidden;
        float: left;
        cursor: default;
    }

        .calc-left > div > div, .calc-right > div > div {
            position: absolute;
            top: 0px;
            right: 0px;
            height: 28px;
            left: 0px;
            width: 100%;
            border: 1px solid #000;
            border-radius: 6px;
            color: #eee;
            text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.5);
            text-align: center;
            background: #656e72;
            border-top-left-radius: 6px;
            border-top-right-radius: 6px;
            border-bottom-left-radius: 26px 6px;
            border-bottom-right-radius: 26px 6px;
            box-shadow: inset 0 -15px 1px rgba( 0, 0, 0, 0.25), inset 0 1px 1px rgba(255, 255, 255, 0.4), inset 0 6px 6px rgba(255, 255, 255, 0.25);
            border: none;
        }

            .calc-left > div > div:hover, .calc-right > div > div:hover {
                text-shadow: 0px 0px 8px rgb(255, 230, 186), 0px 0px 22px rgb(255, 255, 255), 0px -1px 0px rgba( 0, 0, 0, 0.5);
            }

    .calc-right .calc-eq {
        height: 68px;
        position: absolute;
        bottom: 0;
        right: 7px;
        background-color: #EA6811;
    }

    .calc-down {
        padding-top: 40px;
    }

    .calc-radxy sup {
        padding-bottom: 4px;
        display: block;
        position: absolute;
        left: 14px;
        top: 6px;
    }

    .calc-radxy em {
        font-weight: normal;
        font-size: 16px;
        padding-right: 2px;
    }

    .calc-right .calc-zero {
        width: 110px;
    }

        .calc-right .calc-zero div {
            text-align: left;
        }

        .calc-right .calc-zero span {
            padding-left: 22px;
        }

    .calc-blank {
        border-color: transparent;
        background: none;
        background-image: none;
        box-shadow: none;
        clear: right;
    }

    .calc-right .calc-brown > div {
        background-color: #635045;
    }

    .calc-right .calc-brown {
        background-color: #4b3c34;
    }

    .calc-right .calc-black > div {
        background-color: #000;
        box-shadow: inset 0 -13px 1px rgba(50, 50, 50, 0.5), inset 0 1px 1px rgba(255, 255, 255, 0.25), inset 0 8px 6px rgba(255, 255, 255, 0.2);
    }

    .calc-right .calc-black {
        background-color: #181818;
    }

    .calc-right .calc-orange > div {
        background-color: #FF7113;
        box-shadow: inset 0 -13px 1px rgba(148, 77, 18, 0.20), inset 0 7px 6px rgba(255, 255, 255, 0.3), inset 0 6px 6px rgba(255, 255, 255, 0.1);
    }

    .calc-left > div:active, .calc-right > div:active,
    .calc-left .calc-press, .calc-right .calc-press {
        box-shadow: inset 0 -9px 6px rgba(255, 255, 255, 0.35), 0 1px rgba(255, 255, 255, 0.15);
    }

        .calc-left > div:active > div, .calc-right > div:active > div,
        .calc-left .calc-press > div, .calc-right .calc-press > div {
            background: none;
            box-shadow: inset 0 1px 1px rgba(255, 255, 255, 0.3);
        }

    .calc-left .calc-active, .calc-right .calc-active {
        box-shadow: 1px 1px rgb(220, 220, 240), -1px -1px rgb(220, 220, 240), 1px -1px rgb(220, 220, 240), -1px 1px rgb(220, 220, 240), 2px 2px 2px rgb(220, 220, 240), -2px -2px 2px rgb(220, 220, 240), 2px -2px 2px rgb(220, 220, 240), -2px 2px 2px rgb(220, 220, 240);
        border-color: #333;
    }

    .calc-left .calc-second {
        background-color: #222;
    }

        .calc-left .calc-second div {
            text-shadow: 0 1px 0 rgba(0, 0, 0, 0.7);
            color: #EA6811;
        }

    sup, sub {
        font-size: 10px;
        line-height: 0;
        padding-left: 1px;
    }
</style>




<div style="direction: ltr;">
    <div class="calc-main">
        <div class="calc-display">
            <span>0</span>
            <div class="calc-rad">Rad</div>
            <div class="calc-hold"></div>
            <div class="calc-buttons">
                <div class="calc-info">?</div>
                <div class="calc-smaller">&gt;</div>
                <div class="calc-ln">.</div>
            </div>
        </div>
        <div class="calc-left">
            <div><div>2nd</div></div>
            <div><div>(</div></div>
            <div><div>)</div></div>
            <div><div>%</div></div>
            <div><div>1/x</div></div>
            <div><div>x<sup>2</sup></div></div>
            <div><div>x<sup>3</sup></div></div>
            <div><div>y<sup>x</sup></div></div>
            <div><div>x!</div></div>
            <div><div>&radic;</div></div>
            <div>
                <div class="calc-radxy">
                    <sup>x</sup><em>&radic;</em><span>y</span>
                </div>
            </div>
            <div><div>log</div></div>
            <div><div>sin</div></div>
            <div><div>cos</div></div>
            <div><div>tan</div></div>
            <div><div>ln</div></div>
            <div><div>sinh</div></div>
            <div><div>cosh</div></div>
            <div><div>tanh</div></div>
            <div><div>e<sup>x</sup></div></div>
            <div><div>Deg</div></div>
            <div><div>&pi;</div></div>
            <div><div>EE</div></div>
            <div><div>Rand</div></div>
        </div>
        <div class="calc-right">
            <div><div>mc</div></div>
            <div><div>m+</div></div>
            <div><div>m-</div></div>
            <div><div>mr</div></div>
            <div class="calc-brown"><div>AC</div></div>
            <div class="calc-brown"><div>+/&#8211;</div></div>
            <div class="calc-brown calc-f19"><div>&divide;</div></div>
            <div class="calc-brown calc-f21"><div>&times;</div></div>
            <div class="calc-black"><div>7</div></div>
            <div class="calc-black"><div>8</div></div>
            <div class="calc-black"><div>9</div></div>
            <div class="calc-brown calc-f18"><div>&#8211;</div></div>
            <div class="calc-black"><div>4</div></div>
            <div class="calc-black"><div>5</div></div>
            <div class="calc-black"><div>6</div></div>
            <div class="calc-brown calc-f18"><div>+</div></div>
            <div class="calc-black"><div>1</div></div>
            <div class="calc-black"><div>2</div></div>
            <div class="calc-black"><div>3</div></div>
            <div class="calc-blank"><textarea></textarea></div>
            <div class="calc-orange calc-eq calc-f17">
                <div>
                    <div class="calc-down">=</div>
                </div>
            </div>
            <div class="calc-black calc-zero">
                <div>
                    <span>0</span>
                </div>
            </div>
            <div class="calc-black calc-f21"><div>.</div></div>
        </div>
    </div>
</div>




<script>
    (function (window) {
        'use strict';

        var calcSS3 = document.querySelector('.calc-main'),
            // display things
            display = calcSS3.querySelector('.calc-display span'),
            radDeg = calcSS3.querySelector('.calc-rad'),
            smallerButton = calcSS3.querySelector('.calc-smaller'),
            hold = calcSS3.querySelector('.calc-hold'),
            lnButton = calcSS3.querySelector('.calc-ln'),
            helpButton = calcSS3.querySelector('.calc-info'),
            secondKeySet = [].slice.call(calcSS3.querySelector('.calc-left').children, 12, 20),
            hiddenCopy = calcSS3.querySelector('textarea'),

            pressedKey,
            frozenKey, // active calculation keys
            secondActive = false, // 2nd key active?
            bracketKey,
            brackets = 0, // count of current open brackets
            calculator = [], // instances of Calculator
            deg = false, // Deg mode or Rad
            memory = 0,
            resBuffer = '0',
            bigger = false, // app size
            ln = 0,
            buffStr = [],
            sav = ['secondActive', 'deg', 'memory', 'buffStr', 'resBuffer'],
            keyBoard = {},
            secondLayer = [
                ['sin', 'cos', 'tan', 'ln', 'sinh', 'cosh', 'tanh', 'e<sup>x</sup>'],
                [
                    'sin<sup>-1</sup>', 'cos<sup>-1</sup>', 'tan<sup>-1</sup>', 'log<sub>2</sub>',
                    'sinh<sup>-1</sup>', 'cosh<sup>-1</sup>', 'tanh<sup>-1</sup>', '2<sup>x</sup>'
                ]
            ],
            Calculator = function () { // for every '(' a new instance
                this.stack = [],
                    this.num = 0,
                    this.res = 0,
                    this.buff = [false, false];

                this.curr = true;

                this.rank = {
                    '=': 0,
                    '+': 1, '-': 1,
                    '/': 2, '*': 2,
                    'yx': 3, 'x√y': 3, 'EE': 3
                };
            };

        Calculator.prototype.calc = function (key, val) {
            var rank = this.rank;

            if (key === '%') {
                this.curr = 'funk';
                return (this.stack[0] ? this.stack[this.num - 1][0] / 100 * val : val / 100) + '';
            }
            key = key.replace('×', '*').replace('÷', '/').replace('–', '-');
            if (key !== '=') {
                this.buff[1] = key;
            } else if (this.buff[0] === false) {
                this.buff[0] = val; // feed buffer for repeating '='
            }
            if (key === '=' && !this.stack[0] && this.curr && this.buff[1]) { // repeating '='
                return (this.buff[1] === 'yx' ? Math.pow(val, this.buff[0]) : this.buff[1] === 'x√y' ?
                    Math.pow(val, 1 / this.buff[0]) : [1] === 'EE' ? val * Math.pow(10, this.buff[0]) :
                        eval('(' + val + ')' + this.buff[1] + '(' + this.buff[0] + ')')) + '';
            }
            if (!this.stack[0] && key !== '=') { // first filling
                this.buff[0] = false;
                this.stack[this.num++] = [val, key];
                this.curr = true;
                return val + '';
            }
            if (this.stack[0] && this.curr && this.curr !== 'funk' && key !== '=') { // retyping / correcting operant
                this.stack[this.num - 1] = [val, key];
                return val + ''
            }
            if (!this.stack[0]) {
                return val + '';
            }
            if (rank[key] <= rank[this.stack[this.num - 1][1]]) {
                this.stack[this.num - 1] = [
                    this.stack[this.num - 1][1] === 'yx' ? Math.pow(this.stack[this.num - 1][0], val) :
                        this.stack[this.num - 1][1] === 'x√y' ? Math.pow(this.stack[this.num - 1][0], 1 / val) :
                            this.stack[this.num - 1][1] === 'EE' ? this.stack[this.num - 1][0] * Math.pow(10, val) :
                                eval('(' + this.stack[this.num - 1][0] + ')' + this.stack[this.num - 1][1] + '(' + val + ')'),
                    key
                ];
            }
            if (rank[key] > rank[this.stack[this.num - 1][1]]) {
                this.stack[this.num++] = [val, key];
            } else if (this.stack[this.num - 2] && rank[key] <= rank[this.stack[this.num - 2][1]]) {
                this.calc(key, this.stack[--this.num][0]);
            }
            this.res = (this.stack[this.num - 1] ? this.stack[this.num - 1][0] : this.res) + '';
            if (key === '=') {
                this.init('AX');
            }
            this.curr = true;
            return this.res;
        };

        Calculator.prototype.init = function (key) {
            if (key.match(/A/)) {
                this.stack = [];
                this.num = 0;
            };
            if (key === 'AC') {
                this.buff = [false, false];
            }
            return '0';
        };


        // ---------- INIT... ---------- //

        // hiddenCopy.focus(); // for Chrome extention only

        // colloect all keys...
        for (var k = 2; k--;) {
            for (var l = calcSS3.children[k + 1], m = l.children, n = m.length; n--;) {
                keyBoard[l.children[n].textContent.replace(/\s*/g, '')] = l.children[n];
            }
        }
        keyBoard['C'] = keyBoard['AC'];
        keyBoard['Rad'] = keyBoard['Deg'];
        for (var m = secondLayer[0], n = m.length; n--;) {
            keyBoard[secondLayer[1][n].replace(/<\/*\w+>/g, '')] = keyBoard[m[n]];
        }
        keyBoard['2x'] = keyBoard['ex'];


        calculator[0] = new Calculator();


        // ---------------- event listeners keys ---------------- //

        //document.addEventListener('keypress', function (e) {
        //    var key = e.which,
        //        holdKey = hold.textContent,
        //        keyMatch = (',|.|-|–|/|÷|*|×|#|+/–|x|x!|E|EE|e|ex| |2nd|r|x√y|R|√|p|π|^|yx|\'|yx|"|yx|m|mr|v|mc|b|m+|n|m-|' +
        //            's|sin|c|cos|t|tan|S|sin-1|C|cos-1|T|tan-1|d|Deg|°|Deg|l|ln|L|log|\\|1/x|X|2x').split('|'),
        //        keyMatchHold = ('sin|sinh|cos|cosh|tan|tanh|m-|Rand|Deg|Rand|sin-1|sinh-1|cos-1|cosh-1|tan-1|tanh-1|' +
        //            '1|1/x|2|x2|3|x3|x√y|√|ln|log2|ex|2x').split('|');

        //    if (key === 13) key = 61;
        //    key = String.fromCharCode(key);
        //    for (var n = 0, m = keyMatch.length; n < m; n = n + 2)
        //        if (key === keyMatch[n]) {
        //            key = key.replace(key, keyMatch[n + 1]);
        //            break
        //        }
        //    if (holdKey) {
        //        for (var n = 0, m = keyMatchHold.length; n < m; n = n + 2)
        //            if (key == keyMatchHold[n]) {
        //                key = key.replace(key, keyMatchHold[n + 1]);
        //                break
        //            }
        //        hold.textContent = '';
        //    }
        //    if ((key === 'h' || key === 'H') && !holdKey) hold.textContent = 'hold';
        //    if (key === 'G' && holdKey) switchGrouping(true);
        //    if (!keyBoard[key]) return false;
        //    if ((key.match(/-1$|log2$|2x$/) && !secondActive) || (key.match(/h$|n$|cos$|ex$/) && secondActive)) {
        //        keyDown(false, keyBoard['2nd']);
        //        doKey('2nd', true);
        //    }
        //    keyDown(false, keyBoard[key]);
        //    doKey(key, true);
        //}, false);

        //document.addEventListener('keydown', function (e) {
        //    var str = resBuffer.replace(/\s/g, ''),
        //        strLen = str.split('').length - 1;

        //    toggleOptions();
        //    if (e.which === 8 && calculator[brackets].curr !== true &&
        //        calculator[brackets].curr !== 'funk' && str !== '0') {
        //        e.preventDefault();
        //        while (buffStr.length && !keyBoard[buffStr[buffStr.length - 1]]) { // bull shit key(s)
        //            buffStr.pop();
        //        }
        //        if (buffStr[buffStr.length - 1] === '+/–') {
        //            doKey('+/–', true);
        //            buffStr.pop();
        //        } // +/-
        //        else if (resBuffer.match(/\-\d$/) || resBuffer.match(/^\d$/)) {
        //            buffStr.pop();
        //            doKey('C', true);
        //            render('0');
        //        } else {
        //            render(str.substring(0, strLen), true);
        //        }
        //        buffStr.pop();
        //        if (buffStr[buffStr.length - 1] === '.') {
        //            render(str.substring(0, strLen - 1));
        //            buffStr.pop()
        //        }
        //    }
        //    if (e.which === 220) {
        //        keyDown(false, keyBoard['xy']);
        //    }
        //    if (e.which === 46) {
        //        keyDown(false, keyBoard['AC']);
        //        doKey(keyBoard['AC'].textContent, true);
        //    }
        //    if (e.which === 9) {
        //        toggleCalc(true);
        //        e.preventDefault();
        //    }
        //}, false);

        //document.addEventListener('keyup', function () {
        //    keyUp();
        //    saveState();
        //}, false);

        //document.body.addEventListener('paste', function (e) {
        //    render(parseFloat(e.clipboardData.getData("Text") + '') + '');
        //    calculator[brackets].curr = true;
        //    keyBoard['AC'].children[0].firstChild.data = 'C';
        //    if (frozenKey) freezeKey(frozenKey, true);
        //    e.preventDefault();
        //}, false);

        //document.body.addEventListener('copy', function (e) {
        //    hiddenCopy.textContent = resBuffer.replace(/\s/g, '');
        //    hiddenCopy.focus();
        //    hiddenCopy.select();
        //}, false);

        // ---------------- event listeners mouse --------------- //

        calcSS3.onmousedown = function (e) {
            keyDown(e);
            if (!pressedKey) return false;
            document.addEventListener('mouseout', keyUp, false);
            document.addEventListener('mouseover', keyDown, false);
            return false;
        }

        document.addEventListener('mouseup', function (e) {
            var event = e || window.event,
                target = getTargetKey(event.target),
                keyText = target.textContent.replace(/\s*/g, ''),
                key = keyBoard[keyText];

            if (event.target === helpButton) {
                //window.location = 'http://dematte.at/calculator#usage';
            }
            if (event.target === smallerButton) {
                toggleCalc(true);
            }
            if (event.target === lnButton) {
                switchGrouping(true);
            }
            if (event.target !== lnButton) {
                toggleOptions();
            }
            document.removeEventListener('mouseout', keyUp, false);
            document.removeEventListener('mouseover', keyDown, false);
            if (!pressedKey) {
                return false;
            }
            if (key) {
                doKey(keyText);
                saveState();
            }
        }, false);

        display.parentElement.addEventListener('dblclick', function () {
            if (!helpButton.active) {
                toggleCalc(true);
            }
        }, false);

        helpButton.addEventListener('mouseover', function () {
            toggleOptions(true);
        }, false);

        // ------------------- event related functions ------------------ //

        function keyDown(e, obj) { // works for mouse and key
            var event = e || window.event,
                target = obj || getTargetKey(event.target),
                keyText = target.textContent.replace(/\s*/g, ''),
                key = keyBoard[keyText];

            if (key) {
                keyUp(); // recover key in case of a javaScript Error
                pressedKey = key;
                key.className = key.className + ' calc-press';
            }
            return false;
        }

        function getTargetKey(elm) {
            while (elm !== calcSS3 && elm.parentNode && elm.parentNode.style &&
                !/calc-(?:left|right)/.test(elm.parentNode.className)) {
                elm = elm.parentNode;
            }
            return elm;
        }

        function keyUp() {
            if (pressedKey && pressedKey !== secondActive) {
                pressedKey.className = pressedKey.className.replace(' calc-press', '');
                pressedKey = null;
            }
        }

        function freezeKey(key, del) {
            var obj = (!del || del !== 2) ? frozenKey : key;
            if (obj) obj.className = obj.className.replace(' calc-active', '');
            if (!del) {
                key.className = key.className + ' calc-active';
                frozenKey = key;
            }
            return obj;
        }

        function saveState() {
            for (var n = sav.length; n--;) {
                localStorage[sav[n]] = eval(sav[n]); // oooohhhh, outch...
            }
        }

        function toggleOptions(doIt) {
            helpButton.active = !!doIt;
        }

        function toggleCalc(doIt) {
            var cName = calcSS3.className;

            if (doIt) {
                bigger = !bigger;
            }
            localStorage['bigger'] = bigger;
            calcSS3.className = bigger ?
                cName.replace(' calc-small', '') :
                cName + ' calc-small';
            smallerButton.firstChild.data = bigger ? '>' : '<';
            render(resBuffer);
        }

        function switchGrouping(doIt) {
            if (doIt) {
                ln = ++ln > 3 ? 0 : ln;
            }
            lnButton.firstChild.data = !ln ? '.' : ln === 1 ? ',' : ln === 2 ? ',.' : '.,';
            render(resBuffer);
            localStorage['ln'] = ln;
        }

        function render(val, inp) {
            var regx = /(\d+)(\d{3})/,
                hasComma = val.match(/\./),
                tmp,
                valAbs = Math.abs(+val),
                fontSize = 45,
                displayStyle = display.style,
                displayParentStyle = display.parentNode.style;

            if (val.match(/NaN|Inf|Error/)) {
                tmp = 'Error';
            } else {
                resBuffer = val;
                if (valAbs >= 1e+16) {
                    val = (+val).toExponential(13) + '';
                }
                if (!bigger && ((!inp || inp === '+/–') && valAbs !== 0)) {
                    val = (+val).toPrecision(9);
                }
                tmp = (val + '').split('.');
                if (tmp[1]) {
                    tmp[2] = tmp[1].split('e');
                    if (tmp[2][1]) {
                        tmp[1] = tmp[2][0];
                    }
                    if (!inp || inp === '+/–') {
                        tmp[1] = (((+('1.' + tmp[1])).toPrecision(bigger ? 16 : tmp[2][1] ? 7 : 9)) + '');
                        if (tmp[1] >= 2) {
                            tmp[0] = (+tmp[0] + 1) + '';
                        }
                        tmp[1] = tmp[1].substr(2).replace(/0+$/, '');
                    }
                }
                while (regx.test(tmp[0])) {
                    tmp[0] = tmp[0].replace(regx, '$1' + ' ' + '$2');
                }
                tmp = tmp[0] + ((tmp[1] || hasComma) ? '.' + tmp[1] : '').
                    replace('.undefined', '').
                    replace(inp ? '' : /\.$/, '') + (tmp[2] && tmp[2][1] ? 'e' + tmp[2][1] : '');
            }
            if (ln) {
                tmp = tmp.replace(/\./g, '#').
                    replace(/\s/g, ln === 1 ? ' ' : ln === 2 ? ',' : '.').
                    replace(/#/g, ln === 2 ? '.' : ',');
            }
            display.firstChild.data = tmp;
            // for common use: get values of pixels dynamically to stay free from design (...but outside this function)
            displayStyle.fontSize = '45px';
            displayParentStyle.lineHeight = '61px';
            while (display.offsetWidth > display.parentNode.offsetWidth - (bigger ? 40 : 30)) {
                displayStyle.fontSize = (fontSize--) + 'px';
                displayParentStyle.lineHeight = (fontSize + 18) + 'px'
            }
        }

        function doKey(text, alt) {
            var key = keyBoard[text]; // text = key.textContent.replace(/\s*/g, '');

            if (text === '2nd') {
                secondActive = secondActive ? null : true;
                key.className = secondActive ? 'calc-press calc-second' : ''; // !!!
                for (var n = secondKeySet.length; n--;) {
                    secondKeySet[n].children[0].innerHTML = secondLayer[secondActive ? 1 : 0][n];
                }
            } else if (text.match(/^[+|–|÷|×|yx|x√y|E]+$/) && text !== '√') {
                freezeKey(key);
            } else if (text.match(/^[\d|\.|π]$/)) {
                freezeKey(key, true);
                keyBoard['AC'].children[0].firstChild.data = 'C';
            } else if (text === 'C') {
                key.children[0].firstChild.data = 'AC';
                if (frozenKey) freezeKey(frozenKey);
            } else if (text.match(/AC|=/)) {
                if (bracketKey) freezeKey(bracketKey, 2);
                freezeKey(key, true);
                frozenKey = null
            } else if (text.match(/Deg|Rad/)) {
                radDeg.firstChild.data = deg ? 'Rad' : 'Deg';
                key.children[0].firstChild.data = deg ? 'Deg' : 'Rad';
                deg = !deg
            } else if (text === '(') {
                bracketKey = key;
                freezeKey(bracketKey, 2).className += ' calc-active';
            } else if (text === ')' && brackets === 1 && bracketKey) {
                freezeKey(bracketKey, 2);
            } else if (text.match(/^mr$/) && memory) {
                keyBoard['AC'].children[0].firstChild.data = 'C';
            }

            evalKey(text);

            if (!alt) {
                keyUp();
            }
            if (text.match(/^m[c|+|-]/)) {
                freezeKey(keyBoard['mr'], 2).className += (memory ? ' calc-active' : '');
            }
        }

        function evalKey(key) {
            var dispVal = resBuffer.replace(/\s/g, '').replace(/Error|∞|-∞/, '0') + '',
                _PI = Math.PI,
                lastKey;

            if (!key.match(/2nd|Deg|Rad|m/)) { // +/- issue
                buffStr.push(key);
                if ((buffStr[buffStr.length - 2] === '=' && key !== '=' &&
                    calculator[brackets].curr) || key === 'AC') {
                    buffStr = [key];
                }
            }
            lastKey = buffStr[buffStr.length - 2];
            if (key.match(/^[\d|\.]$/) || key === '+/–') {
                if (calculator[brackets].curr && key !== '+/–' || (key === '+/–' &&
                    lastKey && lastKey.match(/^[+|–|÷|×|yx|x√y|E|^C]+$/))) {
                    dispVal = '0';
                    calculator[brackets].curr = false;
                }
                if ((Math.abs(+(dispVal + key)) > (bigger ? 1e15 : 1e9) ||
                    dispVal.replace(/^-/, '').length > 15 ||
                    (dispVal.replace('-', '').replace(/\./g, '').length > (bigger ? 14 : 8)) ||
                    (dispVal.match(/\.|\e\+/) && key === '.')) && key !== '+/–') {
                    buffStr.pop();
                    return;
                } else if (key === '+/–') {
                    render(!(dispVal.replace(/e[\+|\-]/, '')).match('-') ?
                        '-' + dispVal : dispVal.replace(/^-/, ''), '+/–');
                } else {
                    render((dispVal + key).replace(/^(-)*?0(\d)$/, '$1' + '$2'), true);
                }
            } else if (key.match(/^C|AC/)) {
                render(calculator[brackets].init(key));
                hold.textContent = '';
            } else if (key.match(/^[+|–|÷|×|-|\/|*|yx|x√y|%|E]+$/) && key !== '√') {
                render(calculator[brackets].calc(key, dispVal));
            } else {
                if (brackets > -1) {
                    calculator[brackets].curr = 'funk';
                }
                switch (key) {
                    case '=':
                        while (brackets > -1) {
                            render(dispVal = calculator[brackets--].calc('=', dispVal));
                        }
                        brackets = 0;
                        calculator[brackets].curr = true;
                        break;
                    case '(':
                        calculator[++brackets] = new Calculator();
                        calculator[brackets].curr = true;
                        break;
                    case ')':
                        if (brackets) {
                            render(calculator[brackets--].calc('=', dispVal));
                        }
                        if (brackets > -1) {
                            calculator[brackets].curr = false;
                        }
                        break;
                    case 'mc':
                        memory = 0;
                        break;
                    case 'm+':
                        memory += +dispVal;
                        break;
                    case 'm-':
                        memory -= +dispVal;
                        break;
                    case 'mr':
                        render(memory + '');
                        break;
                    case '1/x':
                        render((1 / dispVal) + '');
                        break;
                    case 'x2':
                        render(Math.pow(dispVal, 2) + '');
                        break;
                    case 'x3':
                        render(Math.pow(dispVal, 3) + '');
                        break;
                    case 'x!':
                        render((function fak(n) {
                            return n < 0 || n > 170 ? NaN : n <= 1 ? 1 : n * fak(n - 1)
                        })(Math.round(+dispVal)) + '');
                        break;
                    case '√':
                        render(Math.sqrt(dispVal) + '');
                        break;
                    case 'log':
                        render(Math.log(dispVal) / Math.log(10) + '');
                        break;
                    case 'sin':
                        render(!deg && Math.abs(dispVal) === _PI ? '0' :
                            Math.sin(dispVal * (deg ? _PI / 180 : 1)) + '');
                        break;
                    case 'sin-1':
                        render(Math.asin(dispVal) * (deg ? 180 / _PI : 1) + '');
                        break;
                    case 'cos':
                        render(Math.cos(dispVal * (deg ? _PI / 180 : 1)) + '');
                        break;
                    case 'cos-1':
                        render(Math.acos(dispVal) * (deg ? 180 / _PI : 1) + '');
                        break;
                    case 'tan':
                        render(!deg && Math.abs(dispVal) === _PI ? '0' :
                            Math.tan(dispVal * (deg ? _PI / 180 : 1)) + '');
                        break;
                    case 'tan-1':
                        render(Math.atan(dispVal) * (deg ? 180 / _PI : 1) + '');
                        break;
                    case 'ln':
                        render(Math.log(dispVal) + '');
                        break;
                    case 'log2':
                        render(Math.log(dispVal) / Math.log(2) + '');
                        break;
                    case 'sinh':
                        render(((Math.pow(Math.E, dispVal) - Math.pow(Math.E, -dispVal)) / 2) + '');
                        break;
                    case 'sinh-1':
                        render(Math.log(+dispVal + Math.sqrt(1 + Math.pow(dispVal, 2))) + '');
                        break;
                    case 'cosh':
                        render(((Math.pow(Math.E, dispVal) + Math.pow(Math.E, -dispVal)) / 2) + '');
                        break;
                    case 'cosh-1':
                        render(2 * Math.log(Math.sqrt((+dispVal + 1) / 2) + Math.sqrt((+dispVal - 1) / 2)) + '');
                        break;
                    case 'tanh':
                        (function (e1, e2) {
                            render((e1 - e2) / (e1 + e2) + '');
                        })(Math.pow(Math.E, dispVal), Math.pow(Math.E, -dispVal));
                        break;
                    case 'tanh-1':
                        render((Math.log(+dispVal + 1) - Math.log(1 - dispVal)) / 2 + '');
                        break;
                    case 'ex':
                        render(Math.exp(dispVal) + '');
                        break;
                    case '2x':
                        render(Math.pow(2, (dispVal)) + '');
                        break;
                    case 'π':
                        render(_PI + '');
                        break;
                    case 'Rand':
                        render(Math.random() + '');
                        break;
                    default:
                        // buffStr.pop();
                        break;
                }
            }
        }
    })(window);

</script>





